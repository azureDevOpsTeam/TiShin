@using TiShinShop.DTOs.Product
@model ShippingInfoViewModel

<div class="xl:col-span-3 col-span-4 w-full">
    <!-- shipping -->
    <div class="space-y-4">
        <!-- Header and order information -->
        <div class="dark:bg-background-dark dark:text-white bg-white rounded-lg drop-shadow-lg border-gray-300 border-1 p-4">
            <h1 class="font-bold text-lg mb-4 relative pb-4 before:absolute before:right-0 before:bottom-0 before:size-2 before:rounded-full before:bg-primary after:absolute after:w-40 after:h-2 after:bottom-0 after:right-4 after:bg-primary after:rounded-lg">تکمیل اطلاعات ارسال</h1>

            <div class="border-b border-gray-200 pb-4 mb-4">
                <div class="flex justify-between items-center mb-2">
                    <h2 class=" text-gray-700 dark:text-white">آدرس تحویل سفارش</h2>
                    <button class="text-primary-600 dark:text-white hover:text-primary-800 dark:hover:text-white text-sm flex items-center">
                        تغییر آدرس
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
                        </svg>
                    </button>
                </div>
                <p class="text-gray-600 dark:text-white flex flex-col space-y-3 mt-3 text-sm">
                    <span>@Model.Address</span>
                    <span>کد پستی: @Model.PostalCode</span>
                </p>
            </div>

            <div>
                <h2 class=" text-gray-700 mb-2 dark:text-white">اطلاعات کاربر</h2>
                <p class="text-gray-600 text-sm dark:text-white">
                    @Model.FullName - @Model.PhoneNumber
                </p>
            </div>
        </div>

        <!-- Select the shipping method -->
        <div class="dark:bg-background-dark dark:text-white bg-white rounded-lg drop-shadow-lg border-gray-300 border-1 p-4">
            <h2 class="font-bold text-lg mb-4 relative pb-4 before:absolute before:right-0 before:bottom-0 before:size-2 before:rounded-full before:bg-primary after:absolute after:w-40 after:h-2 after:bottom-0 after:right-4 after:bg-primary after:rounded-lg">روش ارسال را انتخاب کنید</h2>

            <div class="space-y-4">
                @for (int i = 0; i < Model.DeliveryMethods.Count; i++)
                {
                    var method = Model.DeliveryMethods[i];
                    bool isFirst = i == 0;

                    <div class="border border-gray-200 rounded-lg p-4 hover:border-primary-500 transition-all">
                        <div class="flex justify-between items-center">
                            <div>
                                <h3 class="font-medium text-gray-700 dark:text-white">@method.Name</h3>
                                <p class="text-sm text-gray-500 mt-1 dark:text-white">روش ارسال</p>
                            </div>
                            <div class="flex items-center">
                                <span class="text-green-500 text-sm ml-2 dark:text-white">موجود</span>
                                <input type="radio"
                                       name="delivery"
                                       class="h-5 w-5 text-primary-600 delivery-method"
                                       data-type="@method.Type"
                                @(isFirst ? "checked disabled" : "disabled") />
                            </div>
                        </div>
                        <div class="mt-3 pt-3 border-t border-gray-100">
                            <p class="text-sm text-gray-600 dark:text-white">
                                هزینه ارسال: <span class="delivery-cost">@String.Format("{0:N0}", method.Cost)</span> تومان
                            </p>
                        </div>
                    </div>
                }
            </div>

        </div>

        <!-- Select the product to send -->
        <div class="dark:bg-background-dark dark:text-white bg-white rounded-lg drop-shadow-lg border-gray-300 border-1 p-4">
            <h2 class="font-bold text-lg mb-4 relative pb-4 before:absolute before:right-0 before:bottom-0 before:size-2 before:rounded-full before:bg-primary after:absolute after:w-40 after:h-2 after:bottom-0 after:right-4 after:bg-primary after:rounded-lg">محصولات قابل ارسال</h2>

            <div class="space-y-4">
                @foreach (var item in Model.CartItems)
                {
                    <div class="flex items-center border-b border-gray-100 pb-4">
                        <img src="/uploads/products/@item.Image" alt="@item.Title" class="w-16 h-16 object-cover rounded-md">
                        <div class="mr-3 flex-1">
                            <h3 class="font-medium text-gray-700 dark:text-white">@item.Title</h3>
                            <p class="text-sm text-gray-500 dark:text-white">رنگ: @item.Color - سایز: @item.Size</p>
                        </div>
                        <span class="text-green-500 text-sm">تعداد: @item.Quantity</span>
                    </div>
                }
            </div>
        </div>

        <!-- Choose a time to send -->
        <div class="dark:bg-background-dark dark:text-white bg-white rounded-lg drop-shadow-lg border-gray-300 border-1 p-4">
            <h2 class="font-bold text-lg mb-4 relative pb-4 before:absolute before:right-0 before:bottom-0 before:size-2 before:rounded-full before:bg-primary after:absolute after:w-40 after:h-2 after:bottom-0 after:right-4 after:bg-primary after:rounded-lg">زمان تحویل : حداکثر 24 تا 48 ساعت کاری</h2>

            <div class="mb-6">
                <div class="flex overflow-x-auto pb-2 space-x-2" id="day-selector">
                </div>
            </div>

            @*  <div class="mb-6">
                <div class="flex overflow-x-auto pb-2 space-x-2" id="day-selector">
                    @foreach (var day in Model.AvailableDays)
                    {
                        <button class="px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded">@day.Day <br /> @day.Date</button>
                    }
                </div>
            </div>

            <h3 class="font-medium text-gray-700 mb-3 dark:text-white">بازه زمانی تحویل</h3>
            <div class="grid grid-cols-2 gap-3" id="time-slots">
                @foreach (var slot in Model.TimeSlots)
                {
                    <button class="px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded">
                        @slot.From تا @slot.To
                    </button>
                }
            </div> *@
        </div>
    </div>
</div>
<!-- calculate -->
<div class="xl:col-span-1 col-span-4 w-full">
    <div class="dark:bg-background-dark sticky top-0 dark:text-white bg-white rounded-lg drop-shadow-lg border-gray-300 border-1 p-4">
        <ul class="space-y-5">
            <li class="flex justify-between item-center dark:text-white">
                <h6 class="font-bold">قیمت کالاها</h6>
                <p>@String.Format("{0:N0}", Model.TotalPrice) تومان</p>
            </li>
            <li class="flex justify-between item-center dark:text-white">
                <h6 class="font-bold">تخفیف کالاها</h6>
                <p class="text-primary font-bold">@String.Format("{0:N0}", Model.DiscountAmount) تومان</p>
            </li>
            <li class="flex justify-between item-center dark:text-white">
                <h6 class="font-bold">هزینه ارسال</h6>
                <p>@String.Format("{0:N0}", Model.ShippingCost) تومان</p>
            </li>
            <li class="flex justify-between item-center dark:text-white">
                <h6 class="font-bold">مجموع قابل پرداخت</h6>
                <p class="text-green-600 font-bold">@String.Format("{0:N0}", Model.FinalAmount) تومان</p>
            </li>
            <li>
                <a href="/checkout/submit" class="p-2 bg-primary-grad w-full block text-center rounded-lg text-white">
                    تسویه حساب
                </a>
            </li>
        </ul>
    </div>
</div>