@page
@model TiShin.Pages.LoginModel
@{
    ViewData["Title"] = "عضویت";
    Layout = "";
}
<!DOCTYPE html>
<html lang="en" dir="rtl">

<head>
    <meta charset="utf-8" />
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>@ViewData["Title"] - TiShin</title>
    <meta name="description"
        content="تی شین، فروشگاه آنلاین لباس زیر زنانه با طراحی‌های خاص و کیفیت بالا. انواع شورت، سوتین و لباس زیر راحتی برای هر سلیقه. به زیبایی و راحتی شما اهمیت می‌دهیم.">
    <meta name="keywords"
        content="لباس زیر زنانه, شورت زنانه, سوتین, فروشگاه لباس زیر, تی شین, لباس زیر راحتی, شورت و سوتین, خرید آنلاین لباس زیر, لباس زیر زنانه باکیفیت, انواع شورت زنانه, سوتین برای زنان, خرید لباس زیر اینترنتی">
    <meta name="robots" content="index, follow">
    <meta name="author" content="تی شین">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#E91E63">
    <meta name="copyright" content="تمامی حقوق متعلق به Ti-Shin است.">
    <meta property="og:title" content="تی شین - فروشگاه آنلاین لباس زیر زنانه">
    <meta property="og:description"
        content="خرید انواع لباس زیر زنانه شامل شورت، سوتین و لباس راحتی با بهترین کیفیت و طراحی خاص.">
    <meta property="og:image" content="URL تصویر برای نمایش پیش‌نمایش">
    <meta property="og:url" content="https://ti-shin.ir">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="تی شین - فروشگاه آنلاین لباس زیر زنانه">
    <meta name="twitter:description" content="خرید آنلاین شورت، سوتین و لباس راحتی زنانه در فروشگاه تی شین.">
    <meta name="twitter:image" content="URL تصویر برای توییتر">


    <link rel="apple-touch-icon" sizes="180x180" href="/~/images/favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/~/images/favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/~/images/favicon_io/favicon-16x16.png">
    <link rel="canonical" href="https://example.com/your-page-url">
    <link rel="stylesheet" href="~/js/plugin/swiper/swiper-bundle.min.css" asp-append-version="true">
    <link rel="stylesheet" href="~/css/app.css" asp-append-version="true">
    <link rel="preload" href="~/fonts/payda/PeydaWebFaNum-Medium.woff2" as="font" type="font/woff2" crossorigin>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet" />
    <style>
        input[type="tel"] {
            padding-left: 40px !important;
            padding-right: 40px !important;
        }

        input[type="text"],
        input[type="password"] {
            padding-left: 10px !important;
            padding-right: 10px !important;
        }
    </style>
</head>

<body
    class="bg-light dark:bg-background-dark text-text-primary-light dark:text-text-primary-dark transition-colors duration-200">

    <div class="min-h-screen flex flex-col lg:flex-row">
        <!-- Image section -->
        <div class="lg:w-1/2 auth-bg relative hidden lg:flex items-center justify-center p-12">
            <div class="absolute inset-0 bg-black/30 dark:bg-black/50"></div>
            <div class="relative z-10 text-white text-center max-w-md">
                <div class="w-20 h-20 rounded-xl bg-primary-grad flex items-center justify-center mx-auto mb-6">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-white" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                    </svg>
                </div>
                <h2 class="text-3xl font-bold mb-4">به تی شین خوش آمدید!</h2>
                <p class="text-lg mb-6"> با ثبت‌نام در فروشگاه آنلاین تی شین، با دسترسی به مجموعه‌ای بی‌نظیر از محصولات
                    باکیفیت و مناسبترین قیمت ‌، خریدی دلپذیر را از خانه خود تجربه کنید.</p>
            </div>
        </div>

        <!-- Login form section -->
        <div class="lg:w-1/2 flex items-center justify-center p-6">
            <div class="w-full max-w-md">
                <!-- Mobile logo -->
                <div class="flex items-center justify-center mb-8 lg:hidden">
                    <div class="w-12 h-12 rounded-md bg-primary-grad flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                        </svg>
                    </div>
                    <h1 class="mr-3 text-xl font-bold text-dark dark:text-light">قالب<span class="text-primary"> تی
                            شیــن </span></h1>
                </div>

                <div
                    class="bg-white dark:bg-card-dark rounded-2xl shadow-soft dark:shadow-soft-dark p-8 border border-gray-100 dark:border-gray-700 fade-in">
                    <div class="text-center mb-8">
                        <h2 class="text-2xl font-bold text-dark dark:text-light mb-2">ورود به حساب کاربری</h2>
                        <p class="text-gray-500 dark:text-gray-400">روش ورود را انتخاب کنید</p>
                    </div>

                    <!-- Login method selection tabs -->
                    <div class="flex mb-6 rounded-xl overflow-hidden border border-gray-200 dark:border-gray-600">
                        <button id="sms-tab" class="tab-button flex-1 py-3 px-4 text-sm font-medium active"
                            onclick="switchTab('sms')">
                            ورود با کد یکبار مصرف
                        </button>
                        <button id="password-tab" class="tab-button flex-1 py-3 px-4 text-sm font-medium"
                            onclick="switchTab('password')">
                            ورود با رمز عبور
                        </button>
                    </div>

                    <!-- Login form with password -->
                    <form method="post" class="space-y-5 hidden" id="password-form">

                        <!-- Username/Mobile -->
                        <div>
                            <label for="username"
                                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">نام کاربری یا
                                شماره موبایل</label>
                            <div class="relative">
                                <input type="text" id="username"
                                    class="w-full pl-12 pr-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                    placeholder="نام کاربری یا شماره موبایل" asp-for="Input.PhoneNumber" required>
                                <div class="absolute input-icon top-1/2 transform -translate-y-1/2 text-gray-400">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                    </svg>
                                </div>
                            </div>
                            <p class="error-message hidden" id="username-error">لطفا شماره موبایل معتبر وارد کنید</p>
                        </div>

                        <!-- رمز عبور -->
                        <div>
                            <label for="password"
                                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">رمز عبور</label>
                            <div class="relative">
                                <input type="password" id="password"
                                    class="w-full pl-12 pr-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                    placeholder="رمز عبور خود را وارد کنید" asp-for="Input.Password" required>
                                <div class="absolute input-icon top-1/2 transform -translate-y-1/2 text-gray-400">
                                </div>
                                <button type="button"
                                    class="absolute password-toggle top-1/2 transform -translate-y-1/2 text-gray-400"
                                    onclick="togglePassword('password')">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                                    </svg>
                                </button>
                            </div>
                            <p class="error-message hidden" id="password-error">رمز عبور باید حداقل ۶ کاراکتر باشد</p>
                        </div>

                        <!-- Password reminder and login button -->
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <input id="remember-me" name="remember-me" type="checkbox"
                                    class="h-4 w-4 text-primary dark:text-primary-dark focus:ring-primary dark:focus:ring-primary-dark border-gray-300 dark:border-gray-600 rounded">
                                <label for="remember-me" class="mr-2 block text-sm text-gray-700 dark:text-gray-300">مرا
                                    به خاطر بسپار</label>
                            </div>
                            <div class="text-sm">
                                <a href="#" class="font-medium text-primary dark:text-primary-dark hover:underline">رمز
                                    عبور را فراموش کرده‌اید؟</a>
                            </div>
                        </div>

                        <!-- Login button -->
                        <div>
                            <button type="submit"
                                class="w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-primary dark:bg-primary-dark hover:bg-primary/90 dark:hover:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors">
                                ورود به حساب
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20"
                                    fill="currentColor">
                                    <path fill-rule="evenodd"
                                        d="M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z"
                                        clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>
                    </form>

                    <!-- SMS login form -->
                    <form class="space-y-5" id="sms-form" onsubmit="return false;">

                        @inject Microsoft.AspNetCore.Antiforgery.IAntiforgery Antiforgery
                        <input name="__RequestVerificationToken" type="hidden"
                            value="@Antiforgery.GetAndStoreTokens(HttpContext).RequestToken" />
                        <!-- Mobile number -->
                        <div>
                            <label for="mobile"
                                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">شماره
                                موبایل</label>
                            <div class="relative">
                                <input type="tel" id="mobile" name="Login2FAInput.PhoneNumber"
                                    class="w-full pl-12 pr-4 py-3 border rounded-xl ..." placeholder="09xxxxxxxxx"
                                    required>
                                <div class="absolute input-icon top-1/2 transform -translate-y-1/2 text-gray-400">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                                    </svg>
                                </div>
                            </div>
                            <p class="error-message hidden" id="mobile-error">لطفا شماره موبایل معتبر وارد کنید</p>
                        </div>

                        <!-- Verification code -->
                        <div id="otp-section" class="hidden">
                            <label for="otp-code"
                                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">کد تایید</label>
                            <div class="relative">
                                <input type="text" name="Login2FAInput.Code" id="otp-code"
                                    class="w-full pl-12 pr-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                    placeholder="کد ۵ رقمی ارسال شده">
                                <div class="absolute input-icon top-1/2 transform -translate-y-1/2 text-gray-400">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                                    </svg>
                                </div>
                            </div>
                            <div class="flex items-center justify-between mt-2">
                                <p class="error-message hidden" id="otp-error">کد تایید نامعتبر است</p>
                                <div id="countdown" class="text-sm text-gray-500 dark:text-gray-400 hidden">
                                    ارسال مجدد کد پس از <span id="countdown-time">120</span> ثانیه
                                </div>
                                <button type="button" id="resend-otp"
                                    class="text-sm font-medium text-primary dark:text-primary-dark hover:underline hidden"
                                    onclick="sendOTP()">
                                    ارسال مجدد کد
                                </button>
                            </div>
                        </div>

                        <!-- Send verification code/login button -->
                        <div>
                            <button type="button"
                                class="w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-primary dark:bg-primary-dark hover:bg-primary/90 dark:hover:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors"
                                id="send-otp-btn" onclick="sendOTP()">
                                دریافت کد تایید
                            </button>

                            <button type="button" onclick="verifyCode()"
                                class="w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-primary dark:bg-primary-dark hover:bg-primary/90 dark:hover:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors hidden"
                                id="verify-otp-btn">
                                تایید و ورود
                            </button>
                        </div>


                    </form>

                    <!-- Login with social networks -->
                    <div class="mt-6">
                        <div class="relative">
                            <div class="absolute inset-0 flex items-center">
                                <div class="w-full border-t border-gray-300 dark:border-gray-600"></div>
                            </div>
                            <div class="relative flex justify-center text-sm">
                                <span class="px-2 bg-white dark:bg-card-dark text-gray-500 dark:text-gray-400">یا ورود
                                    با</span>
                            </div>
                        </div>

                        <div class="mt-6 grid grid-cols-3 gap-3">
                            <div>
                                <a href="#"
                                    class="w-full inline-flex justify-center items-center py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-xl shadow-sm bg-white dark:bg-gray-700 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600">
                                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                                        <path fill-rule="evenodd"
                                            d="M10 0C4.477 0 0 4.477 0 10c0 4.42 2.865 8.166 6.839 9.489.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.342-3.369-1.342-.454-1.155-1.11-1.462-1.11-1.462-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.564 9.564 0 0110 4.844c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.933.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C17.14 18.163 20 14.418 20 10c0-5.523-4.477-10-10-10z"
                                            clip-rule="evenodd" />
                                    </svg>
                                </a>
                            </div>

                            <div>
                                <a href="#"
                                    class="w-full inline-flex justify-center items-center py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-xl shadow-sm bg-white dark:bg-gray-700 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600">
                                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                                        <path fill-rule="evenodd"
                                            d="M10 0C4.477 0 0 4.477 0 10c0 5.523 4.477 10 10 10 5.523 0 10-4.477 10-10C20 4.477 15.523 0 10 0zm6.25 14.5c-.41.41-1.08.41-1.5 0l-3.75-3.75-3.75 3.75c-.41.41-1.08.41-1.5 0-.41-.42-.41-1.08 0-1.5l3.75-3.75-3.75-3.75c-.41-.42-.41-1.08 0-1.5.42-.41 1.08-.41 1.5 0l3.75 3.75 3.75-3.75c.42-.41 1.08-.41 1.5 0 .41.42.41 1.08 0 1.5l-3.75 3.75 3.75 3.75c.41.42.41 1.08 0 1.5z"
                                            clip-rule="evenodd" />
                                    </svg>
                                </a>
                            </div>

                            <div>
                                <a href="#"
                                    class="w-full inline-flex justify-center items-center py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-xl shadow-sm bg-white dark:bg-gray-700 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600">
                                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                                        <path
                                            d="M6.29 18.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0020 3.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.073 4.073 0 01.8 7.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 010 16.407a11.616 11.616 0 006.29 1.84" />
                                    </svg>
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Registration link -->
                    <div class="mt-6 text-center">
                        <p class="text-sm text-gray-500 dark:text-gray-400">
                            حساب کاربری ندارید؟
                            <a href="/Register"
                                class="font-medium text-primary dark:text-primary-dark hover:underline">ثبت نام کنید</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

    <script>

        // Function to show/hide password
        function togglePassword(id) {
            const passwordInput = document.getElementById(id);
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
        }

        // Function to switch between login tabs
        function switchTab(tab) {
            const passwordTab = document.getElementById('password-tab');
            const smsTab = document.getElementById('sms-tab');
            const passwordForm = document.getElementById('password-form');
            const smsForm = document.getElementById('sms-form');

            if (tab === 'password') {
                passwordTab.classList.add('active');
                smsTab.classList.remove('active');
                passwordForm.classList.remove('hidden');
                smsForm.classList.add('hidden');
            } else {
                passwordTab.classList.remove('active');
                smsTab.classList.add('active');
                passwordForm.classList.add('hidden');
                smsForm.classList.remove('hidden');
            }
        }

        // Function to send OTP code
        function sendOTP() {
            const mobile = document.getElementById('mobile');
            const mobileError = document.getElementById('mobile-error');
            const otpSection = document.getElementById('otp-section');
            const sendOtpBtn = document.getElementById('send-otp-btn');
            const verifyOtpBtn = document.getElementById('verify-otp-btn');

            // Reset error UI
            mobile.classList.remove('input-error');
            mobileError.classList.add('hidden');

            // Validate mobile
            if (!mobile.value) {
                mobile.classList.add('input-error');
                mobileError.textContent = 'لطفا شماره موبایل را وارد کنید';
                mobileError.classList.remove('hidden');
                return;
            } else if (!/^09\d{9}$/.test(mobile.value)) {
                mobile.classList.add('input-error');
                mobileError.textContent = 'شماره موبایل معتبر نیست';
                mobileError.classList.remove('hidden');
                return;
            }

            // Call SendCode handler with AJAX
            fetch('?handler=SendCode', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'RequestVerificationToken': document.querySelector('input[name="__RequestVerificationToken"]').value
                },
                body: JSON.stringify({
                    PhoneNumber: mobile.value
                })
            })
                .then(response => {
                    if (!response.ok) throw new Error("ارسال کد با خطا مواجه شد");
                    return response.json(); // اینجا return اضافه شده
                })
                .then(data => {
                    if (data.success) {
                        // Show OTP section
                        otpSection.classList.remove('hidden');
                        sendOtpBtn.classList.add('hidden');
                        verifyOtpBtn.classList.remove('hidden');
                        startCountdown();
                    } else {
                        toastr.error(data.message);
                    }
                })
                .catch(error => {
                    console.log(error.message);
                });
        }
        function verifyCode() {
            const mobileInput = document.getElementById('mobile');
            const codeInput = document.getElementById('otp-code');
            const token = document.querySelector('input[name="__RequestVerificationToken"]').value;

            const mobile = mobileInput.value.trim();
            const code = codeInput.value.trim();

            if (!code) {
                toastr.error('لطفا کد تایید را وارد کنید');
                return;
            }

            fetch('?handler=VerifyCode', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'RequestVerificationToken': token
                },
                body: JSON.stringify({ PhoneNumber: mobile, Code: code })
            })
                .then(response => {
                    if (!response.ok) {
                        return response.json().then(err => { throw err });
                    }
                    return response.json();
                })
                .then(data => {
                    if (data.success) {
                        window.location.href = '/Index';
                    } else {
                        toastr.error('کد تایید اشتباه است.');
                    }
                })
                .catch(error => {
                    // console.error('Error:', error);
                    toastr.error('خطایی در تایید کد رخ داد.');
                });
        }

        // Countdown timer for resending the code
        function startCountdown() {
            const countdown = document.getElementById('countdown');
            const countdownTime = document.getElementById('countdown-time');
            const resendOtp = document.getElementById('resend-otp');

            let timeLeft = 120;

            countdown.classList.remove('hidden');
            resendOtp.classList.add('hidden');

            const timer = setInterval(() => {
                timeLeft--;
                countdownTime.textContent = timeLeft;

                if (timeLeft <= 0) {
                    clearInterval(timer);
                    countdown.classList.add('hidden');
                    resendOtp.classList.remove('hidden');
                }
            }, 1000);
        }

        // Form validation for password login
        document.getElementById('password-form').addEventListener('submit', function (e) {
            e.preventDefault();

            const username = document.getElementById('username');
            const password = document.getElementById('password');
            const usernameError = document.getElementById('username-error');
            const passwordError = document.getElementById('password-error');

            let isValid = true;

            // Clear previous errors
            username.classList.remove('input-error');
            password.classList.remove('input-error');
            usernameError.classList.add('hidden');
            passwordError.classList.add('hidden');

            // Validate username or mobile
            if (!username.value) {
                username.classList.add('input-error');
                usernameError.textContent = 'لطفا نام کاربری یا شماره موبایل را وارد کنید';
                usernameError.classList.remove('hidden');
                isValid = false;
            } else if (/^09\d{9}$/.test(username.value)) {
                // Valid mobile number
            } else if (username.value.length < 3) {
                username.classList.add('input-error');
                usernameError.textContent = 'نام کاربری باید حداقل ۳ کاراکتر باشد';
                usernameError.classList.remove('hidden');
                isValid = false;
            }

            // Validate password
            if (!password.value) {
                password.classList.add('input-error');
                passwordError.textContent = 'لطفا رمز عبور را وارد کنید';
                passwordError.classList.remove('hidden');
                isValid = false;
            } else if (password.value.length < 6) {
                password.classList.add('input-error');
                passwordError.textContent = 'رمز عبور باید حداقل ۶ کاراکتر باشد';
                passwordError.classList.remove('hidden');
                isValid = false;
            }

            // Submit if form is valid
            if (isValid) {
                this.submit();
                // You can send data to server here
            }
        });

        // Form validation for SMS login
        // document.getElementById('sms-form').addEventListener('submit', function(e) {
        //     e.preventDefault();

        //     const otpCode = document.getElementById('otp-code');
        //     const otpError = document.getElementById('otp-error');

        //     // Validate OTP code
        //     otpCode.classList.remove('input-error');
        //     otpError.classList.add('hidden');

        //     if (!otpCode.value) {
        //         otpCode.classList.add('input-error');
        //         otpError.textContent = 'لطفا کد تایید را وارد کنید';
        //         otpError.classList.remove('hidden');
        //         return;
        //     } else if (!/^\d{5}$/.test(otpCode.value)) {
        //         otpCode.classList.add('input-error');
        //         otpError.textContent = 'کد تایید باید ۵ رقم باشد';
        //         otpError.classList.remove('hidden');
        //         return;
        //     }

        //     // You can send OTP to server here
        //     alert('ورود با موفقیت انجام شد! (این یک پیام نمونه است)');
        // });

        // Function to show login error message
        function showLoginError(message) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'mb-4 p-4 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-300 rounded-xl';
            errorDiv.textContent = message || 'نام کاربری یا رمز عبور اشتباه است';

            const form = document.getElementById('login-form');
            form.insertBefore(errorDiv, form.firstChild);

            // Automatically remove error message after 5 seconds
            setTimeout(() => {
                errorDiv.remove();
            }, 5000);
        }

    </script>

</body>

</html>
